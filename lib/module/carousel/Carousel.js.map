{"version":3,"sources":["Carousel.tsx"],"names":["React","Animated","I18nManager","Platform","View","shallowCompare","defaultScrollInterpolator","stackScrollInterpolator","tinderScrollInterpolator","defaultAnimatedStyles","shiftAnimatedStyles","stackAnimatedStyles","tinderAnimatedStyles","IS_ANDROID","OS","IS_WEB","IS_RTL","isRTL","Carousel","Component","constructor","props","state","hideCarousel","apparitionDelay","interpolators","initialActiveItem","_getFirstItem","firstItem","_activeItem","_onScrollActiveItem","_previousFirstItem","_previousItemsLength","_mounted","_positions","_currentScrollOffset","_scrollEnabled","scrollEnabled","_getCellRendererComponent","bind","_getItemLayout","_getKeyExtractor","_onLayout","_onScroll","_onMomentumScrollEnd","_onTouchStart","_onTouchEnd","_renderItem","_setScrollHandler","_displayWarnings","componentDidMount","autoplay","_initPositionsAndInterpolators","_initTimeout","setTimeout","apparitionCallback","setState","startAutoplay","_needsScrollView","_firstItem","_snapToItem","_apparitionTimeout","shouldComponentUpdate","nextProps","nextState","shouldOptimizeUpdates","componentDidUpdate","prevProps","itemsLength","_getCustomDataLength","nextFirstItem","nextActiveItem","hasNewSize","vertical","itemHeight","sliderHeight","itemWidth","sliderWidth","_setScrollEnabled","length","_hackActiveSlideAnimation","onScroll","componentWillUnmount","stopAutoplay","clearTimeout","_hackSlideAnimationTimeout","_enableAutoplayTimeout","_autoplayTimeout","_snapNoMomentumTimeout","_androidRepositioningTimeout","realIndex","currentIndex","_getDataIndex","currentScrollPosition","scrollEventConfig","listener","useNativeDriver","_scrollPos","Value","argMapping","nativeEvent","contentOffset","y","x","Array","isArray","_argMapping","pop","argMap","push","_onScrollHandler","event","pluginName","removedProps","console","error","forEach","removedProp","warn","useScrollView","FlatList","_shouldUseStackLayout","_shouldUseTinderLayout","_needsRTLAdaptations","_enableLoop","data","enableSnap","loop","_shouldAnimateSlides","inactiveSlideOpacity","inactiveSlideScale","scrollInterpolator","slideInterpolatedStyle","_shouldUseShiftLayout","inactiveSlideShift","layout","_shouldRepositionScroll","index","loopClonesPerSide","dataLength","_roundNumber","num","decimals","rounder","Math","pow","round","Number","EPSILON","_isMultiple","_getCustomData","previousItems","nextItems","dataMultiplier","floor","remainder","i","unshift","slice","concat","_getCustomIndex","baseDataIndexes","dataIndexes","j","_getPositionIndex","_getSnapOffsets","offset","_getItemMainDimension","map","_","_getWrappedRef","_carouselRef","scrollTo","scrollToOffset","getNode","_getScrollEnabled","wrappedRef","setNativeProps","_getItemScrollOffset","start","itemMainDimension","children","style","cellStyle","zIndex","_getScrollOffset","_getContainerInnerMargin","opposite","activeSlideAlignment","_getActiveSlideOffset","activeSlideOffset","minOffset","_getActiveItem","center","lastIndex","itemIndex","end","_getSlideInterpolatedStyle","animatedValue","layoutCardOffset","_itemData","_index","interpolator","inputRange","outputRange","interpolate","extrapolate","scrollValue","multiplier","scrollDelta","_scrollTo","animated","_repositionScroll","repositionTo","options","onTouchStart","_autoplaying","pauseAutoPlay","onTouchEnd","_autoplay","onScrollIndexChanged","scrollOffset","autoplayDelay","onMomentumScrollEnd","onSnapToItem","hasSnapped","onLayout","_onLayoutInitDone","fireCallback","forceScrollTo","undefined","requiresManualTrigger","autoplayInterval","_autoplayInterval","setInterval","snapToNext","clearInterval","snapToItem","positionIndex","newIndex","snapToPrev","triggerRenderingHack","item","keyExtractor","slideStyle","animate","animatedStyle","dataIndex","mainDimension","height","width","specificProps","key","renderItem","scrollPosition","carouselRef","_getComponentOverridableProps","visibleItems","ceil","initialNumPerSide","initialNumToRender","maxToRenderPerBatch","windowSize","automaticallyAdjustContentInsets","decelerationRate","directionalLockEnabled","disableScrollViewPanResponder","inverted","overScrollMode","pinchGestureEnabled","pointerEvents","scrollsToTop","showsHorizontalScrollIndicator","showsVerticalScrollIndicator","_getComponentStaticProps","CellRendererComponent","containerCustomStyle","contentContainerCustomStyle","getItemLayout","useExperimentalSnap","containerStyle","opacity","flexDirection","innerMarginStyle","paddingTop","paddingBottom","paddingLeft","paddingRight","contentContainerStyle","snapProps","snapToAlignment","snapToInterval","snapToOffsets","initialScrollIndex","numColumns","ref","c","horizontal","scrollEventThrottle","render","ScrollViewComponent","ScrollView","callbackOffsetMargin","hasParallaxImages"],"mappings":"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","sourcesContent":["import React, { PropsWithChildren } from 'react';\nimport {\n\tAnimated,\n\tFlatList,\n\tI18nManager,\n\tPlatform,\n\tScrollView,\n\tView,\n\tStyleProp,\n\tNativeSyntheticEvent,\n\tNativeScrollEvent,\n\tLayoutChangeEvent,\n\tGestureResponderEvent,\n\tViewStyle,\n} from 'react-native';\nimport shallowCompare from 'react-addons-shallow-compare';\nimport {\n\tdefaultScrollInterpolator,\n\tstackScrollInterpolator,\n\ttinderScrollInterpolator,\n\tdefaultAnimatedStyles,\n\tshiftAnimatedStyles,\n\tstackAnimatedStyles,\n\ttinderAnimatedStyles,\n} from '../utils/animations';\nimport type { CarouselProps, CarouselState } from './types';\n\n// Metro doesn't support dynamic imports - i.e. require() done in the component itself\n// But at the same time the following import will fail on Snack...\n// TODO: find a way to get React Native's version without having to assume the file path\n// import RN_PACKAGE from '../../../react-native/package.json';\n\nconst IS_ANDROID = Platform.OS === 'android';\nconst IS_WEB = Platform.OS === 'web';\n\n// React Native automatically handles RTL layouts; unfortunately, it's buggy with horizontal ScrollView\n// See https://github.com/facebook/react-native/issues/11960\n// NOTE: the following variable is not declared in the constructor\n// otherwise it is undefined at init, which messes with custom indexes\nconst IS_RTL = I18nManager.isRTL;\n\nexport class Carousel<TData> extends React.Component<\n\tCarouselProps<TData>,\n\tCarouselState\n> {\n\tstatic defaultProps = {\n\t\tactiveSlideAlignment: 'center',\n\t\tactiveSlideOffset: 20,\n\t\tapparitionDelay: 0,\n\t\tautoplay: false,\n\t\tautoplayDelay: 1000,\n\t\tautoplayInterval: 3000,\n\t\tcallbackOffsetMargin: 5,\n\t\tcontainerCustomStyle: {},\n\t\tcontentContainerCustomStyle: {},\n\t\tenableSnap: true,\n\t\tfirstItem: 0,\n\t\thasParallaxImages: false,\n\t\tinactiveSlideOpacity: 0.7,\n\t\tinactiveSlideScale: 0.9,\n\t\tinactiveSlideShift: 0,\n\t\tlayout: 'default',\n\t\tloop: false,\n\t\tloopClonesPerSide: 3,\n\t\tscrollEnabled: true,\n\t\tslideStyle: {},\n\t\tshouldOptimizeUpdates: true,\n\t\tuseExperimentalSnap: false,\n\t\tuseScrollView: !Animated.FlatList,\n\t};\n\n\t_activeItem: number;\n\t_onScrollActiveItem: number;\n\t_previousFirstItem: number;\n\t_previousItemsLength: number;\n\t_mounted: boolean;\n\t_positions: { start: number; end: number }[];\n\t_currentScrollOffset: number;\n\t_scrollEnabled: boolean;\n\n\t_initTimeout?: ReturnType<typeof setTimeout>;\n\t_apparitionTimeout?: ReturnType<typeof setTimeout>;\n\t_hackSlideAnimationTimeout?: ReturnType<typeof setTimeout>;\n\t_enableAutoplayTimeout?: ReturnType<typeof setTimeout>;\n\t_autoplayTimeout?: ReturnType<typeof setTimeout>;\n\t_snapNoMomentumTimeout?: ReturnType<typeof setTimeout>;\n\t_androidRepositioningTimeout?: ReturnType<typeof setTimeout>;\n\t_autoplayInterval?: ReturnType<typeof setInterval>;\n\n\t_scrollPos?: Animated.Value;\n\n\t_onScrollHandler?: ReturnType<typeof Animated.event>;\n\n\t_carouselRef: ScrollView | FlatList<TData> | null = null;\n\n\t_autoplaying?: boolean;\n\t_autoplay?: boolean;\n\n\t_onLayoutInitDone?: boolean;\n\n\tconstructor(props: CarouselProps<TData>) {\n\t\tsuper(props);\n\n\t\tthis.state = {\n\t\t\thideCarousel: !!props.apparitionDelay,\n\t\t\tinterpolators: [],\n\t\t};\n\n\t\t// this._RNVersionCode = this._getRNVersionCode();\n\n\t\t// The following values are not stored in the state because 'setState()' is asynchronous\n\t\t// and this results in an absolutely crappy behavior on Android while swiping (see #156)\n\t\tconst initialActiveItem = this._getFirstItem(props.firstItem);\n\t\tthis._activeItem = initialActiveItem;\n\t\tthis._onScrollActiveItem = initialActiveItem;\n\t\tthis._previousFirstItem = initialActiveItem;\n\t\tthis._previousItemsLength = initialActiveItem;\n\n\t\tthis._mounted = false;\n\t\tthis._positions = [];\n\t\tthis._currentScrollOffset = 0; // Store ScrollView's scroll position\n\t\tthis._scrollEnabled = props.scrollEnabled !== false;\n\n\t\tthis._getCellRendererComponent = this._getCellRendererComponent.bind(this);\n\t\tthis._getItemLayout = this._getItemLayout.bind(this);\n\t\tthis._getKeyExtractor = this._getKeyExtractor.bind(this);\n\t\tthis._onLayout = this._onLayout.bind(this);\n\t\tthis._onScroll = this._onScroll.bind(this);\n\t\tthis._onMomentumScrollEnd = this._onMomentumScrollEnd.bind(this);\n\t\tthis._onTouchStart = this._onTouchStart.bind(this);\n\t\tthis._onTouchEnd = this._onTouchEnd.bind(this);\n\t\tthis._renderItem = this._renderItem.bind(this);\n\n\t\t// WARNING: call this AFTER binding _onScroll\n\t\tthis._setScrollHandler(props);\n\n\t\t// Display warnings\n\t\tthis._displayWarnings(props);\n\t}\n\n\tcomponentDidMount() {\n\t\tconst { apparitionDelay, autoplay, firstItem } = this.props;\n\n\t\tthis._mounted = true;\n\t\tthis._initPositionsAndInterpolators();\n\n\t\t// Without 'requestAnimationFrame' or a `0` timeout, images will randomly not be rendered on Android...\n\t\tthis._initTimeout = setTimeout(() => {\n\t\t\tif (!this._mounted) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst apparitionCallback = () => {\n\t\t\t\tif (apparitionDelay) {\n\t\t\t\t\tthis.setState({ hideCarousel: false });\n\t\t\t\t}\n\t\t\t\tif (autoplay) {\n\t\t\t\t\tthis.startAutoplay();\n\t\t\t\t}\n\t\t\t};\n\n\t\t\t// FlatList will use its own built-in prop `initialScrollIndex`\n\t\t\tif (this._needsScrollView()) {\n\t\t\t\tconst _firstItem = this._getFirstItem(firstItem);\n\t\t\t\tthis._snapToItem(_firstItem, false, false, true);\n\t\t\t\t// this._hackActiveSlideAnimation(_firstItem);\n\t\t\t}\n\n\t\t\tif (apparitionDelay) {\n\t\t\t\tthis._apparitionTimeout = setTimeout(() => {\n\t\t\t\t\tapparitionCallback();\n\t\t\t\t}, apparitionDelay);\n\t\t\t} else {\n\t\t\t\tapparitionCallback();\n\t\t\t}\n\t\t}, 1);\n\t}\n\n\tshouldComponentUpdate(\n\t\tnextProps: CarouselProps<TData>,\n\t\tnextState: CarouselState\n\t): boolean {\n\t\tif (this.props.shouldOptimizeUpdates === false) {\n\t\t\treturn true;\n\t\t} else {\n\t\t\treturn shallowCompare(this, nextProps, nextState);\n\t\t}\n\t}\n\n\tcomponentDidUpdate(prevProps: CarouselProps<TData>) {\n\t\tconst { interpolators } = this.state;\n\t\tconst { firstItem, scrollEnabled } = this.props;\n\t\tconst itemsLength = this._getCustomDataLength(this.props);\n\n\t\tif (!itemsLength) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst nextFirstItem = this._getFirstItem(firstItem, this.props);\n\t\tlet nextActiveItem =\n\t\t\ttypeof this._activeItem !== 'undefined'\n\t\t\t\t? this._activeItem\n\t\t\t\t: nextFirstItem;\n\n\t\tconst hasNewSize =\n\t\t\tthis.props.vertical !== prevProps.vertical ||\n\t\t\t(this.props.vertical &&\n\t\t\t\tprevProps.vertical &&\n\t\t\t\t(prevProps.itemHeight !== this.props.itemHeight ||\n\t\t\t\t\tprevProps.sliderHeight !== this.props.sliderHeight)) ||\n\t\t\t(!this.props.vertical &&\n\t\t\t\t!prevProps.vertical &&\n\t\t\t\t(prevProps.itemWidth !== this.props.itemWidth ||\n\t\t\t\t\tprevProps.sliderWidth !== this.props.sliderWidth));\n\n\t\t// Prevent issues with dynamically removed items\n\t\tif (nextActiveItem > itemsLength - 1) {\n\t\t\tnextActiveItem = itemsLength - 1;\n\t\t}\n\n\t\t// Handle changing scrollEnabled independent of user -> carousel interaction\n\t\tif (scrollEnabled !== prevProps.scrollEnabled) {\n\t\t\tthis._setScrollEnabled(scrollEnabled);\n\t\t}\n\n\t\tif (interpolators.length !== itemsLength || hasNewSize) {\n\t\t\tthis._activeItem = nextActiveItem;\n\t\t\tthis._previousItemsLength = itemsLength;\n\n\t\t\tthis._initPositionsAndInterpolators(this.props);\n\n\t\t\t// Handle scroll issue when dynamically removing items (see #133)\n\t\t\t// This also fixes first item's active state on Android\n\t\t\t// Because 'initialScrollIndex' apparently doesn't trigger scroll\n\t\t\tif (this._previousItemsLength > itemsLength) {\n\t\t\t\tthis._hackActiveSlideAnimation(nextActiveItem);\n\t\t\t}\n\n\t\t\tif (hasNewSize) {\n\t\t\t\tthis._snapToItem(nextActiveItem, false, false, true);\n\t\t\t}\n\t\t} else if (\n\t\t\tnextFirstItem !== this._previousFirstItem &&\n\t\t\tnextFirstItem !== this._activeItem\n\t\t) {\n\t\t\tthis._activeItem = nextFirstItem;\n\t\t\tthis._previousFirstItem = nextFirstItem;\n\t\t\tthis._snapToItem(nextFirstItem, false, true, true);\n\t\t}\n\n\t\tif (this.props.onScroll !== prevProps.onScroll) {\n\t\t\tthis._setScrollHandler(this.props);\n\t\t}\n\t}\n\n\tcomponentWillUnmount() {\n\t\tthis._mounted = false;\n\t\tthis.stopAutoplay();\n\t\t// @ts-expect-error setTimeout / clearTiemout is buggy :/\n\t\tclearTimeout(this._initTimeout);\n\t\t// @ts-expect-error setTimeout / clearTiemout is buggy :/\n\t\tclearTimeout(this._apparitionTimeout);\n\t\t// @ts-expect-error setTimeout / clearTiemout is buggy :/\n\t\tclearTimeout(this._hackSlideAnimationTimeout);\n\t\t// @ts-expect-error setTimeout / clearTiemout is buggy :/\n\t\tclearTimeout(this._enableAutoplayTimeout);\n\t\t// @ts-expect-error setTimeout / clearTiemout is buggy :/\n\t\tclearTimeout(this._autoplayTimeout);\n\t\t// @ts-expect-error setTimeout / clearTiemout is buggy :/\n\t\tclearTimeout(this._snapNoMomentumTimeout);\n\t\t// @ts-expect-error setTimeout / clearTiemout is buggy :/\n\t\tclearTimeout(this._androidRepositioningTimeout);\n\t}\n\n\tget realIndex() {\n\t\treturn this._activeItem;\n\t}\n\n\tget currentIndex() {\n\t\treturn this._getDataIndex(this._activeItem);\n\t}\n\n\tget currentScrollPosition() {\n\t\treturn this._currentScrollOffset;\n\t}\n\n\t_setScrollHandler(props: CarouselProps<TData>) {\n\t\t// Native driver for scroll events\n\t\tconst scrollEventConfig = {\n\t\t\tlistener: this._onScroll,\n\t\t\tuseNativeDriver: true,\n\t\t};\n\t\tthis._scrollPos = new Animated.Value(0);\n\t\tconst argMapping = props.vertical\n\t\t\t? [{ nativeEvent: { contentOffset: { y: this._scrollPos } } }]\n\t\t\t: [{ nativeEvent: { contentOffset: { x: this._scrollPos } } }];\n\n\t\t// @ts-expect-error Let's ignore for now that trick\n\t\tif (props.onScroll && Array.isArray(props.onScroll._argMapping)) {\n\t\t\t// Because of a react-native issue https://github.com/facebook/react-native/issues/13294\n\t\t\targMapping.pop();\n\t\t\t// @ts-expect-error Let's ignore for now that trick\n\t\t\tconst [argMap] = props.onScroll._argMapping;\n\t\t\tif (argMap && argMap.nativeEvent && argMap.nativeEvent.contentOffset) {\n\t\t\t\t// Shares the same animated value passed in props\n\t\t\t\tthis._scrollPos =\n\t\t\t\t\targMap.nativeEvent.contentOffset.x ||\n\t\t\t\t\targMap.nativeEvent.contentOffset.y ||\n\t\t\t\t\tthis._scrollPos;\n\t\t\t}\n\t\t\t// @ts-expect-error Let's ignore for now that trick\n\t\t\targMapping.push(...props.onScroll._argMapping);\n\t\t}\n\t\tthis._onScrollHandler = Animated.event<NativeScrollEvent>(\n\t\t\targMapping,\n\t\t\tscrollEventConfig\n\t\t);\n\t}\n\n\t// This will return a future-proof version code number compatible with semantic versioning\n\t// Examples: 0.59.3 -> 5903 / 0.61.4 -> 6104 / 0.62.12 -> 6212 / 1.0.2 -> 10002\n\t// _getRNVersionCode () {\n\t//     const version = RN_PACKAGE && RN_PACKAGE.version;\n\t//     if (!version) {\n\t//         return null;\n\t//     }\n\t//     const versionSplit = version.split('.');\n\t//     if (!versionSplit || !versionSplit.length) {\n\t//         return null;\n\t//     }\n\t//     return versionSplit[0] * 10000 +\n\t//         (typeof versionSplit[1] !== 'undefined' ? versionSplit[1] * 100 : 0) +\n\t//         (typeof versionSplit[2] !== 'undefined' ? versionSplit[2] * 1 : 0);\n\t// }\n\n\t_displayWarnings(props: CarouselProps<TData> = this.props) {\n\t\tconst pluginName = 'react-native-snap-carousel';\n\t\tconst removedProps = [\n\t\t\t'activeAnimationType',\n\t\t\t'activeAnimationOptions',\n\t\t\t'enableMomentum',\n\t\t\t'lockScrollTimeoutDuration',\n\t\t\t'lockScrollWhileSnapping',\n\t\t\t'onBeforeSnapToItem',\n\t\t\t'swipeThreshold',\n\t\t] as const;\n\n\t\t// if (this._RNVersionCode && this._RNVersionCode < 5800) {\n\t\t//     console.error(\n\t\t//         `${pluginName}: Version 4+ of the plugin is based on React Native props that were introduced in version 0.58. ` +\n\t\t//         'Please downgrade to version 3.x or update your version of React Native.'\n\t\t//     );\n\t\t// }\n\t\tif (!props.vertical && (!props.sliderWidth || !props.itemWidth)) {\n\t\t\tconsole.error(\n\t\t\t\t`${pluginName}: You need to specify both 'sliderWidth' and 'itemWidth' for horizontal carousels`\n\t\t\t);\n\t\t}\n\t\tif (props.vertical && (!props.sliderHeight || !props.itemHeight)) {\n\t\t\tconsole.error(\n\t\t\t\t`${pluginName}: You need to specify both 'sliderHeight' and 'itemHeight' for vertical carousels`\n\t\t\t);\n\t\t}\n\n\t\tremovedProps.forEach((removedProp) => {\n\t\t\tif (removedProp in props) {\n\t\t\t\tconsole.warn(\n\t\t\t\t\t`${pluginName}: Prop ${removedProp} has been removed in version 4 of the plugin`\n\t\t\t\t);\n\t\t\t}\n\t\t});\n\t}\n\n\t_needsScrollView() {\n\t\tconst { useScrollView } = this.props;\n\t\t// Android's cell renderer is buggy and has a stange overflow\n\t\t// TODO: a workaround might be to pass the custom animated styles directly to it\n\t\treturn IS_ANDROID\n\t\t\t? useScrollView ||\n\t\t\t\t\t!Animated.FlatList ||\n\t\t\t\t\tthis._shouldUseStackLayout() ||\n\t\t\t\t\tthis._shouldUseTinderLayout()\n\t\t\t: useScrollView || !Animated.FlatList;\n\t}\n\n\t_needsRTLAdaptations() {\n\t\tconst { vertical } = this.props;\n\t\treturn IS_RTL && IS_ANDROID && !vertical;\n\t}\n\n\t_enableLoop() {\n\t\tconst { data, enableSnap, loop } = this.props;\n\t\treturn enableSnap && loop && data && data.length && data.length > 1;\n\t}\n\n\t_shouldAnimateSlides(props: CarouselProps<TData> = this.props) {\n\t\tconst {\n\t\t\tinactiveSlideOpacity,\n\t\t\tinactiveSlideScale,\n\t\t\tscrollInterpolator,\n\t\t\tslideInterpolatedStyle,\n\t\t} = props;\n\t\treturn (\n\t\t\tinactiveSlideOpacity < 1 ||\n\t\t\tinactiveSlideScale < 1 ||\n\t\t\t!!scrollInterpolator ||\n\t\t\t!!slideInterpolatedStyle ||\n\t\t\tthis._shouldUseShiftLayout() ||\n\t\t\tthis._shouldUseStackLayout() ||\n\t\t\tthis._shouldUseTinderLayout()\n\t\t);\n\t}\n\n\t_shouldUseShiftLayout() {\n\t\tconst { inactiveSlideShift, layout } = this.props;\n\t\treturn layout === 'default' && inactiveSlideShift !== 0;\n\t}\n\n\t_shouldUseStackLayout() {\n\t\treturn this.props.layout === 'stack';\n\t}\n\n\t_shouldUseTinderLayout() {\n\t\treturn this.props.layout === 'tinder';\n\t}\n\n\t_shouldRepositionScroll(index: number) {\n\t\tconst { data, enableSnap, loopClonesPerSide } = this.props;\n\t\tconst dataLength = data && data.length;\n\t\tif (\n\t\t\t!enableSnap ||\n\t\t\t!dataLength ||\n\t\t\t!this._enableLoop() ||\n\t\t\t(index >= loopClonesPerSide && index < dataLength + loopClonesPerSide)\n\t\t) {\n\t\t\treturn false;\n\t\t}\n\t\treturn true;\n\t}\n\n\t_roundNumber(num: number, decimals = 1) {\n\t\t// https://stackoverflow.com/a/41716722/\n\t\tconst rounder = Math.pow(10, decimals);\n\t\treturn Math.round((num + Number.EPSILON) * rounder) / rounder;\n\t}\n\n\t_isMultiple(x: number, y: number) {\n\t\t// This prevents Javascript precision issues: https://stackoverflow.com/a/58440614/\n\t\t// Required because Android viewport size can return pretty complicated decimals numbers\n\t\treturn Math.round(Math.round(x / y) / (1 / y)) === Math.round(x);\n\t}\n\n\t_getCustomData(props: CarouselProps<TData> = this.props) {\n\t\tconst { data, loopClonesPerSide } = props;\n\t\tconst dataLength = data && data.length;\n\n\t\tif (!dataLength) {\n\t\t\treturn [];\n\t\t}\n\n\t\tif (!this._enableLoop()) {\n\t\t\treturn data;\n\t\t}\n\n\t\tlet previousItems = [];\n\t\tlet nextItems = [];\n\n\t\tif (loopClonesPerSide > dataLength) {\n\t\t\tconst dataMultiplier = Math.floor(loopClonesPerSide / dataLength);\n\t\t\tconst remainder = loopClonesPerSide % dataLength;\n\n\t\t\tfor (let i = 0; i < dataMultiplier; i++) {\n\t\t\t\tpreviousItems.push(...data);\n\t\t\t\tnextItems.push(...data);\n\t\t\t}\n\n\t\t\tpreviousItems.unshift(...data.slice(-remainder));\n\t\t\tnextItems.push(...data.slice(0, remainder));\n\t\t} else {\n\t\t\tpreviousItems = data.slice(-loopClonesPerSide);\n\t\t\tnextItems = data.slice(0, loopClonesPerSide);\n\t\t}\n\n\t\treturn previousItems.concat(data, nextItems);\n\t}\n\n\t_getCustomDataLength(props: CarouselProps<TData> = this.props) {\n\t\tconst { data, loopClonesPerSide } = props;\n\t\tconst dataLength = data && data.length;\n\n\t\tif (!dataLength) {\n\t\t\treturn 0;\n\t\t}\n\n\t\treturn this._enableLoop() ? dataLength + 2 * loopClonesPerSide : dataLength;\n\t}\n\n\t_getCustomIndex(index: number, props: CarouselProps<TData> = this.props) {\n\t\tconst itemsLength = this._getCustomDataLength(props);\n\n\t\tif (!itemsLength || typeof index === 'undefined') {\n\t\t\treturn 0;\n\t\t}\n\n\t\treturn this._needsRTLAdaptations() ? itemsLength - index - 1 : index;\n\t}\n\n\t_getDataIndex(index: number) {\n\t\tconst { data, loopClonesPerSide } = this.props;\n\t\tconst dataLength = data && data.length;\n\n\t\tif (!this._enableLoop() || !dataLength) {\n\t\t\treturn index;\n\t\t}\n\n\t\tif (index >= dataLength + loopClonesPerSide) {\n\t\t\treturn loopClonesPerSide > dataLength\n\t\t\t\t? (index - loopClonesPerSide) % dataLength\n\t\t\t\t: index - dataLength - loopClonesPerSide;\n\t\t} else if (index < loopClonesPerSide) {\n\t\t\t// TODO: is there a simpler way of determining the interpolated index?\n\t\t\tif (loopClonesPerSide > dataLength) {\n\t\t\t\tconst baseDataIndexes = [];\n\t\t\t\tconst dataIndexes = [];\n\t\t\t\tconst dataMultiplier = Math.floor(loopClonesPerSide / dataLength);\n\t\t\t\tconst remainder = loopClonesPerSide % dataLength;\n\n\t\t\t\tfor (let i = 0; i < dataLength; i++) {\n\t\t\t\t\tbaseDataIndexes.push(i);\n\t\t\t\t}\n\n\t\t\t\tfor (let j = 0; j < dataMultiplier; j++) {\n\t\t\t\t\tdataIndexes.push(...baseDataIndexes);\n\t\t\t\t}\n\n\t\t\t\tdataIndexes.unshift(...baseDataIndexes.slice(-remainder));\n\t\t\t\treturn dataIndexes[index];\n\t\t\t} else {\n\t\t\t\treturn index + dataLength - loopClonesPerSide;\n\t\t\t}\n\t\t} else {\n\t\t\treturn index - loopClonesPerSide;\n\t\t}\n\t}\n\n\t// Used with `snapToItem()` and 'PaginationDot'\n\t_getPositionIndex(index: number) {\n\t\tconst { loop, loopClonesPerSide } = this.props;\n\t\treturn loop ? index + loopClonesPerSide : index;\n\t}\n\n\t_getSnapOffsets(props: CarouselProps<TData> = this.props) {\n\t\tconst offset = this._getItemMainDimension();\n\t\treturn [...Array(this._getCustomDataLength(props))].map((_, i) => {\n\t\t\treturn i * offset;\n\t\t});\n\t}\n\n\t_getFirstItem(index: number, props: CarouselProps<TData> = this.props) {\n\t\tconst { loopClonesPerSide } = props;\n\t\tconst itemsLength = this._getCustomDataLength(props);\n\n\t\tif (!itemsLength || index > itemsLength - 1 || index < 0) {\n\t\t\treturn 0;\n\t\t}\n\n\t\treturn this._enableLoop() ? index + loopClonesPerSide : index;\n\t}\n\n\t_getWrappedRef() {\n\t\t// Starting with RN 0.62, we should no longer call `getNode()` on the ref of an Animated component\n\t\tif (\n\t\t\tthis._carouselRef &&\n\t\t\t((this._needsScrollView() &&\n\t\t\t\t(this._carouselRef as ScrollView).scrollTo) ||\n\t\t\t\t(!this._needsScrollView() &&\n\t\t\t\t\t(this._carouselRef as FlatList).scrollToOffset))\n\t\t) {\n\t\t\treturn this._carouselRef;\n\t\t}\n\t\t// https://github.com/facebook/react-native/issues/10635\n\t\t// https://stackoverflow.com/a/48786374/8412141\n\t\treturn (\n\t\t\tthis._carouselRef &&\n\t\t\t// @ts-expect-error This is for before 0.62\n\t\t\tthis._carouselRef.getNode &&\n\t\t\t// @ts-expect-error This is for before 0.62\n\t\t\tthis._carouselRef.getNode()\n\t\t);\n\t}\n\n\t_getScrollEnabled() {\n\t\treturn this._scrollEnabled;\n\t}\n\n\t_setScrollEnabled(scrollEnabled = true) {\n\t\tconst wrappedRef = this._getWrappedRef();\n\n\t\tif (!wrappedRef || !wrappedRef.setNativeProps) {\n\t\t\treturn;\n\t\t}\n\n\t\t// 'setNativeProps()' is used instead of 'setState()' because the latter\n\t\t// really takes a toll on Android behavior when momentum is disabled\n\t\twrappedRef.setNativeProps({ scrollEnabled });\n\t\tthis._scrollEnabled = scrollEnabled;\n\t}\n\n\t_getItemMainDimension() {\n\t\treturn this.props.vertical ? this.props.itemHeight : this.props.itemWidth;\n\t}\n\n\t_getItemScrollOffset(index: number) {\n\t\treturn (\n\t\t\tthis._positions && this._positions[index] && this._positions[index].start\n\t\t);\n\t}\n\n\t_getItemLayout(_: TData[], index: number) {\n\t\tconst itemMainDimension = this._getItemMainDimension();\n\t\treturn {\n\t\t\tindex,\n\t\t\tlength: itemMainDimension,\n\t\t\toffset: itemMainDimension * index, // + this._getContainerInnerMargin()\n\t\t};\n\t}\n\n\t// This will allow us to have a proper zIndex even with a FlatList\n\t// https://github.com/facebook/react-native/issues/18616#issuecomment-389444165\n\t_getCellRendererComponent({\n\t\tchildren,\n\t\tindex,\n\t\tstyle,\n\t\t...props\n\t}: PropsWithChildren<{ index: number; style: StyleProp<ViewStyle> }>) {\n\t\tconst cellStyle = [\n\t\t\tstyle,\n\t\t\t!IS_ANDROID ? { zIndex: this._getCustomDataLength() - index } : {},\n\t\t];\n\n\t\treturn (\n\t\t\t<View style={cellStyle} key={index} {...props}>\n\t\t\t\t{children}\n\t\t\t</View>\n\t\t);\n\t}\n\n\t_getKeyExtractor(_: TData, index: number) {\n\t\treturn this._needsScrollView()\n\t\t\t? `scrollview-item-${index}`\n\t\t\t: `flatlist-item-${index}`;\n\t}\n\n\t_getScrollOffset(event: NativeSyntheticEvent<NativeScrollEvent>) {\n\t\tconst { vertical } = this.props;\n\t\treturn (\n\t\t\t(event &&\n\t\t\t\tevent.nativeEvent &&\n\t\t\t\tevent.nativeEvent.contentOffset &&\n\t\t\t\tevent.nativeEvent.contentOffset[vertical ? 'y' : 'x']) ||\n\t\t\t0\n\t\t);\n\t}\n\n\t_getContainerInnerMargin(opposite = false) {\n\t\tconst { activeSlideAlignment } = this.props;\n\n\t\tif (\n\t\t\t(activeSlideAlignment === 'start' && !opposite) ||\n\t\t\t(activeSlideAlignment === 'end' && opposite)\n\t\t) {\n\t\t\treturn 0;\n\t\t} else if (\n\t\t\t(activeSlideAlignment === 'end' && !opposite) ||\n\t\t\t(activeSlideAlignment === 'start' && opposite)\n\t\t) {\n\t\t\treturn this.props.vertical\n\t\t\t\t? this.props.sliderHeight - this.props.itemHeight\n\t\t\t\t: this.props.sliderWidth - this.props.itemWidth;\n\t\t} else {\n\t\t\treturn this.props.vertical\n\t\t\t\t? (this.props.sliderHeight - this.props.itemHeight) / 2\n\t\t\t\t: (this.props.sliderWidth - this.props.itemWidth) / 2;\n\t\t}\n\t}\n\n\t_getActiveSlideOffset() {\n\t\tconst { activeSlideOffset } = this.props;\n\t\tconst itemMainDimension = this._getItemMainDimension();\n\t\tconst minOffset = 10;\n\t\t// Make sure activeSlideOffset never prevents the active area from being at least 10 px wide\n\t\treturn itemMainDimension / 2 - activeSlideOffset >= minOffset\n\t\t\t? activeSlideOffset\n\t\t\t: minOffset;\n\t}\n\n\t_getActiveItem(offset: number) {\n\t\tconst itemMainDimension = this._getItemMainDimension();\n\t\tconst center = offset + itemMainDimension / 2;\n\t\tconst activeSlideOffset = this._getActiveSlideOffset();\n\t\tconst lastIndex = this._positions.length - 1;\n\t\tlet itemIndex;\n\n\t\tif (offset <= 0) {\n\t\t\treturn 0;\n\t\t}\n\n\t\tif (\n\t\t\tthis._positions[lastIndex] &&\n\t\t\toffset >= this._positions[lastIndex].start\n\t\t) {\n\t\t\treturn lastIndex;\n\t\t}\n\n\t\tfor (let i = 0; i < this._positions.length; i++) {\n\t\t\tconst { start, end } = this._positions[i];\n\t\t\tif (\n\t\t\t\tcenter + activeSlideOffset >= start &&\n\t\t\t\tcenter - activeSlideOffset <= end\n\t\t\t) {\n\t\t\t\titemIndex = i;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\treturn itemIndex || 0;\n\t}\n\n\t_getSlideInterpolatedStyle(\n\t\tindex: number,\n\t\tanimatedValue: Animated.AnimatedInterpolation\n\t) {\n\t\tconst { layoutCardOffset, slideInterpolatedStyle } = this.props;\n\n\t\tif (slideInterpolatedStyle) {\n\t\t\treturn slideInterpolatedStyle(index, animatedValue, this.props);\n\t\t} else if (this._shouldUseTinderLayout()) {\n\t\t\treturn tinderAnimatedStyles(\n\t\t\t\tindex,\n\t\t\t\tanimatedValue,\n\t\t\t\tthis.props,\n\t\t\t\tlayoutCardOffset\n\t\t\t);\n\t\t} else if (this._shouldUseStackLayout()) {\n\t\t\treturn stackAnimatedStyles(\n\t\t\t\tindex,\n\t\t\t\tanimatedValue,\n\t\t\t\tthis.props,\n\t\t\t\tlayoutCardOffset\n\t\t\t);\n\t\t} else if (this._shouldUseShiftLayout()) {\n\t\t\treturn shiftAnimatedStyles(index, animatedValue, this.props);\n\t\t} else {\n\t\t\treturn defaultAnimatedStyles(index, animatedValue, this.props);\n\t\t}\n\t}\n\n\t_initPositionsAndInterpolators(props: CarouselProps<TData> = this.props) {\n\t\tconst { data, scrollInterpolator } = props;\n\t\tconst itemMainDimension = this._getItemMainDimension();\n\n\t\tif (!data || !data.length) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst interpolators: Animated.AnimatedInterpolation[] = [];\n\t\tthis._positions = [];\n\n\t\tthis._getCustomData(props).forEach((_itemData, index) => {\n\t\t\tconst _index = this._getCustomIndex(index, props);\n\t\t\tlet animatedValue: Animated.AnimatedInterpolation;\n\n\t\t\tthis._positions[index] = {\n\t\t\t\tstart: index * itemMainDimension,\n\t\t\t\tend: index * itemMainDimension + itemMainDimension,\n\t\t\t};\n\n\t\t\tif (!this._shouldAnimateSlides(props) || !this._scrollPos) {\n\t\t\t\tanimatedValue = new Animated.Value(1);\n\t\t\t} else {\n\t\t\t\tlet interpolator;\n\n\t\t\t\tif (scrollInterpolator) {\n\t\t\t\t\tinterpolator = scrollInterpolator(_index, props);\n\t\t\t\t} else if (this._shouldUseStackLayout()) {\n\t\t\t\t\tinterpolator = stackScrollInterpolator(_index, props);\n\t\t\t\t} else if (this._shouldUseTinderLayout()) {\n\t\t\t\t\tinterpolator = tinderScrollInterpolator(_index, props);\n\t\t\t\t}\n\n\t\t\t\tif (\n\t\t\t\t\t!interpolator ||\n\t\t\t\t\t!interpolator.inputRange ||\n\t\t\t\t\t!interpolator.outputRange\n\t\t\t\t) {\n\t\t\t\t\tinterpolator = defaultScrollInterpolator(_index, props);\n\t\t\t\t}\n\n\t\t\t\tanimatedValue = this._scrollPos.interpolate({\n\t\t\t\t\t...interpolator,\n\t\t\t\t\textrapolate: 'clamp',\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tinterpolators.push(animatedValue);\n\t\t});\n\n\t\tthis.setState({ interpolators });\n\t}\n\n\t_hackActiveSlideAnimation(index: number, scrollValue = 1) {\n\t\tconst offset = this._getItemScrollOffset(index);\n\n\t\tif (!this._mounted || !this._carouselRef || typeof offset === 'undefined') {\n\t\t\treturn;\n\t\t}\n\n\t\tconst multiplier = this._currentScrollOffset === 0 ? 1 : -1;\n\t\tconst scrollDelta = scrollValue * multiplier;\n\n\t\tthis._scrollTo({ offset: offset + scrollDelta, animated: false });\n\n\t\t// @ts-expect-error setTimeout / clearTiemout is buggy :/\n\t\tclearTimeout(this._hackSlideAnimationTimeout);\n\t\tthis._hackSlideAnimationTimeout = setTimeout(() => {\n\t\t\tthis._scrollTo({ offset, animated: false });\n\t\t}, 1); // works randomly when set to '0'\n\t}\n\n\t_repositionScroll(index: number, animated = false) {\n\t\tconst { data, loopClonesPerSide } = this.props;\n\t\tconst dataLength = data && data.length;\n\n\t\tif (typeof index === 'undefined' || !this._shouldRepositionScroll(index)) {\n\t\t\treturn;\n\t\t}\n\n\t\tlet repositionTo = index;\n\n\t\tif (index >= dataLength + loopClonesPerSide) {\n\t\t\trepositionTo = index - dataLength;\n\t\t} else if (index < loopClonesPerSide) {\n\t\t\trepositionTo = index + dataLength;\n\t\t}\n\n\t\tthis._snapToItem(repositionTo, animated, false);\n\t}\n\n\t_scrollTo({\n\t\toffset,\n\t\tindex,\n\t\tanimated = true,\n\t}: {\n\t\toffset: number;\n\t\tindex?: number;\n\t\tanimated: boolean;\n\t}) {\n\t\tconst { vertical } = this.props;\n\t\tconst wrappedRef = this._getWrappedRef();\n\t\tif (\n\t\t\t!this._mounted ||\n\t\t\t!wrappedRef ||\n\t\t\t(typeof offset === 'undefined' && typeof index === 'undefined')\n\t\t) {\n\t\t\treturn;\n\t\t}\n\n\t\tlet scrollToOffset;\n\t\tif (typeof index !== 'undefined') {\n\t\t\tscrollToOffset = this._getItemScrollOffset(index);\n\t\t} else {\n\t\t\tscrollToOffset = offset;\n\t\t}\n\n\t\tif (typeof scrollToOffset === 'undefined') {\n\t\t\treturn;\n\t\t}\n\n\t\tconst options = this._needsScrollView()\n\t\t\t? {\n\t\t\t\t\tx: vertical ? 0 : offset,\n\t\t\t\t\ty: vertical ? offset : 0,\n\t\t\t\t\tanimated,\n\t\t\t  }\n\t\t\t: {\n\t\t\t\t\toffset,\n\t\t\t\t\tanimated,\n\t\t\t  };\n\n\t\tif (this._needsScrollView()) {\n\t\t\twrappedRef.scrollTo(options);\n\t\t} else {\n\t\t\twrappedRef.scrollToOffset(options);\n\t\t}\n\t}\n\n\t_onTouchStart(event: GestureResponderEvent) {\n\t\tconst { onTouchStart } = this.props;\n\n\t\t// `onTouchStart` is fired even when `scrollEnabled` is set to `false`\n\t\tif (this._getScrollEnabled() !== false && this._autoplaying) {\n\t\t\tthis.pauseAutoPlay();\n\t\t}\n\n\t\tonTouchStart && onTouchStart(event);\n\t}\n\n\t_onTouchEnd(event: GestureResponderEvent) {\n\t\tconst { onTouchEnd } = this.props;\n\n\t\tif (\n\t\t\tthis._getScrollEnabled() !== false &&\n\t\t\tthis._autoplay &&\n\t\t\t!this._autoplaying\n\t\t) {\n\t\t\t// This event is buggy on Android, so a fallback is provided in _onMomentumScrollEnd()\n\t\t\tthis.startAutoplay();\n\t\t}\n\n\t\tonTouchEnd && onTouchEnd(event);\n\t}\n\n\t_onScroll(event: NativeSyntheticEvent<NativeScrollEvent>) {\n\t\tconst { onScroll, onScrollIndexChanged } = this.props;\n\t\tconst scrollOffset = event\n\t\t\t? this._getScrollOffset(event)\n\t\t\t: this._currentScrollOffset;\n\t\tconst nextActiveItem = this._getActiveItem(scrollOffset);\n\n\t\tthis._currentScrollOffset = scrollOffset;\n\n\t\tif (nextActiveItem !== this._onScrollActiveItem) {\n\t\t\tthis._onScrollActiveItem = nextActiveItem;\n\t\t\tonScrollIndexChanged &&\n\t\t\t\tonScrollIndexChanged(this._getDataIndex(nextActiveItem));\n\t\t}\n\n\t\tif (typeof onScroll === 'function' && event) {\n\t\t\tonScroll(event);\n\t\t}\n\t}\n\n\t_onMomentumScrollEnd(event: NativeSyntheticEvent<NativeScrollEvent>) {\n\t\tconst { autoplayDelay, onMomentumScrollEnd, onSnapToItem } = this.props;\n\t\tconst scrollOffset = event\n\t\t\t? this._getScrollOffset(event)\n\t\t\t: this._currentScrollOffset;\n\t\tconst nextActiveItem = this._getActiveItem(scrollOffset);\n\t\tconst hasSnapped = this._isMultiple(\n\t\t\tscrollOffset,\n\t\t\tthis.props.vertical ? this.props.itemHeight : this.props.itemWidth\n\t\t);\n\n\t\t// WARNING: everything in this condition will probably need to be called on _snapToItem as well because:\n\t\t// 1. `onMomentumScrollEnd` won't be called if the scroll isn't animated\n\t\t// 2. `onMomentumScrollEnd` won't be called at all on Android when scrolling programmatically\n\t\tif (nextActiveItem !== this._activeItem) {\n\t\t\tthis._activeItem = nextActiveItem;\n\t\t\tonSnapToItem && onSnapToItem(this._getDataIndex(nextActiveItem));\n\n\t\t\tif (hasSnapped) {\n\t\t\t\tthis._repositionScroll(nextActiveItem);\n\t\t\t}\n\t\t}\n\n\t\tonMomentumScrollEnd && onMomentumScrollEnd(event);\n\n\t\t// The touchEnd event is buggy on Android, so this will serve as a fallback whenever needed\n\t\t// https://github.com/facebook/react-native/issues/9439\n\t\tif (IS_ANDROID && this._autoplay && !this._autoplaying) {\n\t\t\t// @ts-expect-error setTimeout / clearTiemout is buggy :/\n\t\t\tclearTimeout(this._enableAutoplayTimeout);\n\t\t\tthis._enableAutoplayTimeout = setTimeout(() => {\n\t\t\t\tthis.startAutoplay();\n\t\t\t}, autoplayDelay);\n\t\t}\n\t}\n\n\t_onLayout(event: LayoutChangeEvent) {\n\t\tconst { onLayout } = this.props;\n\n\t\t// Prevent unneeded actions during the first 'onLayout' (triggered on init)\n\t\tif (this._onLayoutInitDone) {\n\t\t\tthis._initPositionsAndInterpolators();\n\t\t\tthis._snapToItem(this._activeItem, false, false, true);\n\t\t} else {\n\t\t\tthis._onLayoutInitDone = true;\n\t\t}\n\n\t\tonLayout && onLayout(event);\n\t}\n\n\t_snapToItem(\n\t\tindex: number,\n\t\tanimated = true,\n\t\tfireCallback = true,\n\t\tforceScrollTo = false\n\t) {\n\t\tconst { onSnapToItem } = this.props;\n\t\tconst itemsLength = this._getCustomDataLength();\n\t\tconst wrappedRef = this._getWrappedRef();\n\n\t\tif (!itemsLength || !wrappedRef) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (!index || index < 0) {\n\t\t\tindex = 0;\n\t\t} else if (itemsLength > 0 && index >= itemsLength) {\n\t\t\tindex = itemsLength - 1;\n\t\t}\n\n\t\tif (index === this._activeItem && !forceScrollTo) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst offset = this._getItemScrollOffset(index);\n\n\t\tif (offset === undefined) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis._scrollTo({ offset, animated });\n\n\t\t// On both platforms, `onMomentumScrollEnd` won't be triggered if the scroll isn't animated\n\t\t// so we need to trigger the callback manually\n\t\t// On Android `onMomentumScrollEnd` won't be triggered when scrolling programmatically\n\t\t// Therefore everything critical needs to be manually called here as well, even though the timing might be off\n\t\tconst requiresManualTrigger = !animated || IS_ANDROID || IS_WEB;\n\t\tif (requiresManualTrigger) {\n\t\t\tthis._activeItem = index;\n\n\t\t\tif (fireCallback) {\n\t\t\t\tonSnapToItem && onSnapToItem(this._getDataIndex(index));\n\t\t\t}\n\n\t\t\t// Repositioning on Android\n\t\t\tif (IS_ANDROID && this._shouldRepositionScroll(index)) {\n\t\t\t\tif (animated) {\n\t\t\t\t\tthis._androidRepositioningTimeout = setTimeout(() => {\n\t\t\t\t\t\t// Without scroll animation, the behavior is completely buggy...\n\t\t\t\t\t\tthis._repositionScroll(index, true);\n\t\t\t\t\t}, 400); // Approximate scroll duration on Android\n\t\t\t\t} else {\n\t\t\t\t\tthis._repositionScroll(index);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tstartAutoplay() {\n\t\tconst { autoplayInterval, autoplayDelay } = this.props;\n\t\tthis._autoplay = true;\n\n\t\tif (this._autoplaying) {\n\t\t\treturn;\n\t\t}\n\n\t\t// @ts-expect-error setTimeout / clearTiemout is buggy :/\n\t\tclearTimeout(this._autoplayTimeout);\n\t\tthis._autoplayTimeout = setTimeout(() => {\n\t\t\tthis._autoplaying = true;\n\t\t\tthis._autoplayInterval = setInterval(() => {\n\t\t\t\tif (this._autoplaying) {\n\t\t\t\t\tthis.snapToNext();\n\t\t\t\t}\n\t\t\t}, autoplayInterval);\n\t\t}, autoplayDelay);\n\t}\n\n\tpauseAutoPlay() {\n\t\tthis._autoplaying = false;\n\t\t// @ts-expect-error setTimeout / clearTiemout is buggy :/\n\t\tclearTimeout(this._autoplayTimeout);\n\t\t// @ts-expect-error setTimeout / clearTiemout is buggy :/\n\t\tclearTimeout(this._enableAutoplayTimeout);\n\t\t// @ts-expect-error setTimeout / clearTiemout is buggy :/\n\t\tclearInterval(this._autoplayInterval);\n\t}\n\n\tstopAutoplay() {\n\t\tthis._autoplay = false;\n\t\tthis.pauseAutoPlay();\n\t}\n\n\tsnapToItem(index: number, animated = true, fireCallback = true) {\n\t\tif (!index || index < 0) {\n\t\t\tindex = 0;\n\t\t}\n\n\t\tconst positionIndex = this._getPositionIndex(index);\n\n\t\tif (positionIndex === this._activeItem) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis._snapToItem(positionIndex, animated, fireCallback);\n\t}\n\n\tsnapToNext(animated = true, fireCallback = true) {\n\t\tconst itemsLength = this._getCustomDataLength();\n\n\t\tlet newIndex = this._activeItem + 1;\n\t\tif (newIndex > itemsLength - 1) {\n\t\t\tnewIndex = 0;\n\t\t}\n\t\tthis._snapToItem(newIndex, animated, fireCallback);\n\t}\n\n\tsnapToPrev(animated = true, fireCallback = true) {\n\t\tconst itemsLength = this._getCustomDataLength();\n\n\t\tlet newIndex = this._activeItem - 1;\n\t\tif (newIndex < 0) {\n\t\t\tnewIndex = itemsLength - 1;\n\t\t}\n\t\tthis._snapToItem(newIndex, animated, fireCallback);\n\t}\n\n\t// https://github.com/facebook/react-native/issues/1831#issuecomment-231069668\n\ttriggerRenderingHack(offset = 1) {\n\t\tthis._hackActiveSlideAnimation(this._activeItem, offset);\n\t}\n\n\t_renderItem({ item, index }: { item: TData; index: number }) {\n\t\tconst { interpolators } = this.state;\n\t\tconst { keyExtractor, slideStyle } = this.props;\n\t\tconst animatedValue = interpolators && interpolators[index];\n\n\t\tif (typeof animatedValue === 'undefined') {\n\t\t\treturn null;\n\t\t}\n\n\t\tconst animate = this._shouldAnimateSlides();\n\t\tconst Component = animate ? Animated.View : View;\n\t\tconst animatedStyle = animate\n\t\t\t? this._getSlideInterpolatedStyle(index, animatedValue)\n\t\t\t: {};\n\t\tconst dataIndex = this._getDataIndex(index);\n\n\t\tconst mainDimension = this.props.vertical\n\t\t\t? { height: this.props.itemHeight }\n\t\t\t: { width: this.props.itemWidth };\n\t\tconst specificProps = this._needsScrollView()\n\t\t\t? {\n\t\t\t\t\tkey: keyExtractor\n\t\t\t\t\t\t? keyExtractor(item, index)\n\t\t\t\t\t\t: this._getKeyExtractor(item, index),\n\t\t\t  }\n\t\t\t: {};\n\n\t\treturn (\n\t\t\t<Component\n\t\t\t\tstyle={[mainDimension, slideStyle, animatedStyle]}\n\t\t\t\tpointerEvents=\"box-none\"\n\t\t\t\t{...specificProps}>\n\t\t\t\t{this.props.vertical\n\t\t\t\t\t? this.props.renderItem(\n\t\t\t\t\t\t\t{ item, index, dataIndex },\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tscrollPosition: this._scrollPos,\n\t\t\t\t\t\t\t\tcarouselRef: this._carouselRef,\n\t\t\t\t\t\t\t\tvertical: this.props.vertical,\n\t\t\t\t\t\t\t\tsliderHeight: this.props.sliderHeight,\n\t\t\t\t\t\t\t\titemHeight: this.props.itemHeight,\n\t\t\t\t\t\t\t}\n\t\t\t\t\t  )\n\t\t\t\t\t: this.props.renderItem(\n\t\t\t\t\t\t\t{ item, index, dataIndex },\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tscrollPosition: this._scrollPos,\n\t\t\t\t\t\t\t\tcarouselRef: this._carouselRef,\n\t\t\t\t\t\t\t\tvertical: !!this.props.vertical,\n\t\t\t\t\t\t\t\tsliderWidth: this.props.sliderWidth,\n\t\t\t\t\t\t\t\titemWidth: this.props.itemWidth,\n\t\t\t\t\t\t\t}\n\t\t\t\t\t  )}\n\t\t\t</Component>\n\t\t);\n\t}\n\n\t_getComponentOverridableProps() {\n\t\tconst { hideCarousel } = this.state;\n\t\tconst { loopClonesPerSide } = this.props;\n\t\tconst visibleItems =\n\t\t\tMath.ceil(\n\t\t\t\tthis.props.vertical\n\t\t\t\t\t? this.props.sliderHeight / this.props.itemHeight\n\t\t\t\t\t: this.props.sliderWidth / this.props.itemWidth\n\t\t\t) + 1;\n\t\tconst initialNumPerSide = this._enableLoop() ? loopClonesPerSide : 2;\n\t\tconst initialNumToRender = visibleItems + initialNumPerSide * 2;\n\t\tconst maxToRenderPerBatch = initialNumToRender + initialNumPerSide * 2;\n\t\tconst windowSize = maxToRenderPerBatch;\n\n\t\tconst specificProps = !this._needsScrollView()\n\t\t\t? {\n\t\t\t\t\tinitialNumToRender,\n\t\t\t\t\tmaxToRenderPerBatch,\n\t\t\t\t\twindowSize,\n\t\t\t\t\t// updateCellsBatchingPeriod\n\t\t\t  }\n\t\t\t: {};\n\n\t\treturn {\n\t\t\t...specificProps,\n\t\t\tautomaticallyAdjustContentInsets: false,\n\t\t\tdecelerationRate: 'fast' as const,\n\t\t\tdirectionalLockEnabled: true,\n\t\t\tdisableScrollViewPanResponder: false, // If set to `true`, touch events will be triggered too easily\n\t\t\tinverted: this._needsRTLAdaptations(),\n\t\t\toverScrollMode: 'never' as const,\n\t\t\tpinchGestureEnabled: false,\n\t\t\tpointerEvents: hideCarousel ? ('none' as const) : ('auto' as const),\n\t\t\t// removeClippedSubviews: !this._needsScrollView(),\n\t\t\t// renderToHardwareTextureAndroid: true,\n\t\t\tscrollsToTop: false,\n\t\t\tshowsHorizontalScrollIndicator: false,\n\t\t\tshowsVerticalScrollIndicator: false,\n\t\t};\n\t}\n\n\t// @ts-nocheck\n\t_getComponentStaticProps() {\n\t\tconst { hideCarousel } = this.state;\n\t\tconst {\n\t\t\tactiveSlideAlignment,\n\t\t\tCellRendererComponent,\n\t\t\tcontainerCustomStyle,\n\t\t\tcontentContainerCustomStyle,\n\t\t\tfirstItem,\n\t\t\tgetItemLayout,\n\t\t\tkeyExtractor,\n\t\t\tstyle,\n\t\t\tuseExperimentalSnap,\n\t\t} = this.props;\n\n\t\tconst containerStyle = [\n\t\t\t// { overflow: 'hidden' },\n\t\t\tcontainerCustomStyle || style || {},\n\t\t\thideCarousel ? { opacity: 0 } : {},\n\t\t\tthis.props.vertical\n\t\t\t\t? { height: this.props.sliderHeight, flexDirection: 'column' as const } // LTR hack; see https://github.com/facebook/react-native/issues/11960\n\t\t\t\t: // and https://github.com/facebook/react-native/issues/13100#issuecomment-328986423\n\t\t\t\t  {\n\t\t\t\t\t\twidth: this.props.sliderWidth,\n\t\t\t\t\t\tflexDirection: this._needsRTLAdaptations()\n\t\t\t\t\t\t\t? ('row-reverse' as const)\n\t\t\t\t\t\t\t: ('row' as const),\n\t\t\t\t  },\n\t\t];\n\n\t\tconst innerMarginStyle = this.props.vertical\n\t\t\t? {\n\t\t\t\t\tpaddingTop: this._getContainerInnerMargin(),\n\t\t\t\t\tpaddingBottom: this._getContainerInnerMargin(true),\n\t\t\t  }\n\t\t\t: {\n\t\t\t\t\tpaddingLeft: this._getContainerInnerMargin(),\n\t\t\t\t\tpaddingRight: this._getContainerInnerMargin(true),\n\t\t\t  };\n\n\t\tconst contentContainerStyle = [\n\t\t\t!useExperimentalSnap ? innerMarginStyle : {},\n\t\t\tcontentContainerCustomStyle || {},\n\t\t];\n\n\t\t// WARNING: `snapToAlignment` won't work as intended because of the following:\n\t\t// https://github.com/facebook/react-native/blob/d0871d0a9a373e1d3ac35da46c85c0d0e793116d/React/Views/ScrollView/RCTScrollView.m#L751-L755\n\t\t// - Snap points will be off\n\t\t// - Slide animations will be off\n\t\t// - Last items won't be set as active (no `onSnapToItem` callback)\n\t\t// Recommended only with large slides and `activeSlideAlignment` set to `start` for the time being\n\t\tconst snapProps = useExperimentalSnap\n\t\t\t? {\n\t\t\t\t\t// disableIntervalMomentum: true, // Slide ± one item at a time\n\t\t\t\t\tsnapToAlignment: activeSlideAlignment,\n\t\t\t\t\tsnapToInterval: this._getItemMainDimension(),\n\t\t\t  }\n\t\t\t: {\n\t\t\t\t\tsnapToOffsets: this._getSnapOffsets(),\n\t\t\t  };\n\n\t\t// Flatlist specifics\n\t\tconst specificProps = !this._needsScrollView()\n\t\t\t? {\n\t\t\t\t\tCellRendererComponent:\n\t\t\t\t\t\tCellRendererComponent || this._getCellRendererComponent,\n\t\t\t\t\tgetItemLayout: getItemLayout || this._getItemLayout,\n\t\t\t\t\tinitialScrollIndex: this._getFirstItem(firstItem),\n\t\t\t\t\tkeyExtractor: keyExtractor || this._getKeyExtractor,\n\t\t\t\t\tnumColumns: 1,\n\t\t\t\t\trenderItem: this._renderItem,\n\t\t\t  }\n\t\t\t: {};\n\n\t\treturn {\n\t\t\t...specificProps,\n\t\t\t...snapProps,\n\t\t\t// eslint-disable-next-line @typescript-eslint/no-explicit-any\n\t\t\tref: (c: any) => {\n\t\t\t\tthis._carouselRef = c as FlatList<TData> | ScrollView;\n\t\t\t},\n\t\t\tcontentContainerStyle: contentContainerStyle,\n\t\t\tdata: this._getCustomData(),\n\t\t\thorizontal: !this.props.vertical,\n\t\t\tscrollEventThrottle: 1,\n\t\t\tstyle: containerStyle,\n\t\t\tonLayout: this._onLayout,\n\t\t\tonMomentumScrollEnd: this._onMomentumScrollEnd,\n\t\t\tonScroll: this._onScrollHandler,\n\t\t\tonTouchStart: this._onTouchStart,\n\t\t\tonTouchEnd: this._onTouchEnd,\n\t\t};\n\t}\n\n\trender() {\n\t\tconst { data, renderItem, useScrollView } = this.props;\n\n\t\tif (!data || !renderItem) {\n\t\t\treturn null;\n\t\t}\n\n\t\t// @ts-nocheck\n\t\tconst props = {\n\t\t\t...this._getComponentOverridableProps(),\n\t\t\t...this.props,\n\t\t\t...this._getComponentStaticProps(),\n\t\t};\n\n\t\tconst ScrollViewComponent =\n\t\t\ttypeof useScrollView === 'function' ? useScrollView : Animated.ScrollView;\n\n\t\treturn this._needsScrollView() || !Animated.FlatList ? (\n\t\t\t<ScrollViewComponent {...props}>\n\t\t\t\t{this._getCustomData().map((item, index) => {\n\t\t\t\t\treturn this._renderItem({ item, index });\n\t\t\t\t})}\n\t\t\t</ScrollViewComponent>\n\t\t) : (\n\t\t\t// @ts-expect-error Seems complicated to make TS 100% happy, while sharing that many things between\n\t\t\t// flatlist && scrollview implementation. I'll prob try to rewrite parts of the logic to overcome that.\n\t\t\t<Animated.FlatList {...props} />\n\t\t);\n\t}\n}\n\nexport default Carousel;\n"]}